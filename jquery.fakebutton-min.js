/*
    Library by Daniel Cohen Gindi (danielgindi@gmail.com) 054-5655765 
    MIT License!
    Version: 2014-02-18
*/
(function(a){function k(a,e){for(var d=0;d<a.length;d++)if(a[d].identifier===e)return a[d];return null}a.fn.fakebutton=function(c){!1!==c&&(!0===c&&(c=0),this.each(function(){-1===this.tabIndex&&(this.tabIndex=c)}));this.on("keydown.fakebutton",function(e){var d=a(this);e.target!==this||13!==e.which&&32!==e.which||(e.preventDefault(),d.addClass("active").on("keyup.fakebutton",function(a){a.target!==this||13!==a.which&&32!==a.which||(a.preventDefault(),d.removeClass("active").off("keyup.fakebutton").click())}))}).on("touchstart.fakebutton",
function(e){function d(){f.removeClass("active").off("touchmove.fakebutton").off("touchend.fakebutton").off("touchcancel.fakebutton");a(window).off("scroll.fakebutton",c)}function c(){l=!0}var f=a(this),l=!1,m=e.originalEvent.changedTouches[0].identifier,g=!0;a(window).on("scroll.fakebutton",c);f.addClass("active").on("touchmove.fakebutton",function(b){if(b=k(b.originalEvent.changedTouches,m))g=(b=document.elementFromPoint(b.pageX,b.pageY))&&(this===b||a.contains(this,b)),f.toggleClass("active",g)}).on("touchend.fakebutton",
function(b){var c=k(b.originalEvent.changedTouches,m);if(c&&(d(),g&&!l&&!b.isDefaultPrevented())){var h=a.Event("click");a.each("target clientX clientY offsetX offsetY screenX screenY pageX pageY".split(" "),function(){h[this]=e[this];h[this]=c[this]});f.trigger(h);b.preventDefault()}}).on("touchcancel.fakebutton",d)});return this};a.fn.unfakebutton=function(){a(this).off(".fakebutton");return this}})(jQuery);
